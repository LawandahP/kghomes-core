version: "3.9"

services:
    backend-core:
        build:
            context: .
        # image: voldermort/kghomes:v1
        container_name: kghomesV2_core
        volumes:
            - .:/usr/src/app
        restart: on-failure
        ports:
            - "8002:8002"
        environment:
            # - DEBUG=1
            # - CELERY_BROKER=redis://redis:6379/0
            # - CELERY_BACKEND=redis://redis:6379/0
            - POSTGRES_DB=$POSTGRES_DB
            - POSTGRES_USER=$POSTGRES_USER
            - POSTGRES_PASSWORD=$POSTGRES_PASSWORD
            - POSTGRES_PORT=$POSTGRES_PORT
            - POSTGRES_HOST=$POSTGRES_HOST
        networks:
            - voldermort-net

networks:
    voldermort-net:
        external: true
